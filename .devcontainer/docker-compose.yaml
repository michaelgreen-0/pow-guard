services: 
  devcontainer: 
    build: 
      context: .. 
      dockerfile: .devcontainer/Dockerfile 
    container_name: devcontainer
    volumes: 
      - ~/.ssh:/root/.ssh:ro 
      - ~/.gitconfig:/root/.gitconfig:ro 
      - /var/run/docker.sock:/var/run/docker.sock 
      - ..:/home/workspace
    group_add:
      - docker
    stdin_open: true
    depends_on:
      - app
      - redis 
      - mockserver

  app:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: python-proxy 
    ports:
      - 5000:5000
    depends_on:
      - redis

  redis:
    image: redis:alpine
    
  mockserver: 
    build:
      context: ..
      dockerfile: docker/Dockerfile.mockserver
    container_name: mockserver
    ports:
      - 5001:5001
    depends_on:
      - app